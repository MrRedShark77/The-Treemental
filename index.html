<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="js/ExpantaNum.js"></script>
    <script src="js/saves.js"></script>
    <script src="js/tree.js"></script>
    <script src="js/main.js"></script>
    <script src="js/canvas.js"></script>
    <script src="js/v.js"></script>

    <title>The Treemental</title>
</head>
<body onload="loadGame()">
    <div id='app'>
        <div class="table_center">
            <div v-for="x in TABS[1]">
                <button style="height: 30px; font-size: 22px; font-weight: bold;" v-if="x.unl()" v-on:click="FUNCTIONS.chTabs(0,TABS[1].indexOf(x))">{{ x.id }}</button>
            </div>
        </div><br><div v-if="player.points && player.tabs[0] == 0">
            <div style="height: 90%; display: flex;">
                <canvas id='tree' style="width: 80%; height: 100%; border: solid 3px white; background-color: #222;"></canvas>
                <div style="width: 20%; height: 100%; border: solid 3px white;"><br>
                    <button style="width: 90%; height: 30px; font-size: 22px; font-weight: bold;" onclick="buyAllTree()">Buy All Upgrades</button>
                    <div style="height: 90px;"><br>
                        You have <h2>{{ format(player.points,0) }}</h2> Points.<br>
                        (+{{format(FUNCTIONS.getPointsGain(),0)}}/s)
                    </div><div v-if='player.showUpg != ""'>
                        <div style="height: 100px;">
                            {{player.canvas.TreeUpgs[player.showUpg].desc}}
                        </div><br>
                        <div style="height: 50px;">
                            Cost: {{format(player.canvas.TreeUpgs[player.showUpg].cost,0)}} Points.
                            <span v-if='TreeUpgs.effs[player.canvas.TreeUpgs[player.showUpg].eff]?TreeUpgs.effs[player.canvas.TreeUpgs[player.showUpg].eff].effDesc:false'><br>Currently: {{ TreeUpgs.effs[player.canvas.TreeUpgs[player.showUpg].eff].effDesc() }}</span>
                        </div><br>
                        <button style="width: 90%; height: 30px; font-size: 22px; font-weight: bold;"
                        v-if='!player.treeUpgs.includes(player.showUpg)'
                        v-bind:class='{closed: !TreeUpgs.can(player.showUpg)}'
                        v-on:click='TreeUpgs.buy(player.showUpg)'>Buy</button>
                    </div>
                </div>
            </div>
        </div><div v-if='player.tabs[0] == 1'>
            <button onclick="save()">Save</button>
            <button onclick="if (confirm('You wanted to RESET your progress to new game?')) {wipe(true); location.reload()}">WIPE</button>
            <button onclick="exporty()">Export</button>
            <button onclick="importy()">Import</button><br>
        </div>
    </div>
</body>
</html>